- name: Auto green to show 2019 in dark green
  run: |
    set -e
    git config --local user.email "${{ secrets.EMAIL }}"
    git config --local user.name "${{ secrets.NAME }}"
    git remote set-url origin https://${{ github.actor }}:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}
    git pull --rebase
    
    start_date="2019-01-06"  # 2019年第一个星期日
    offsets_2019=(
      # 数字2
      175 176 177 178 182 183 184 185 189 196 203 206 207 208 209 213 214 215 216 220 227 234 237 238 239 240 244 245 246 247
      
      # 数字0
      179 180 181 182 186 187 188 189 193 200 207 214 217 218 219 220 224 225 226 227 196 203 210 217
      
      # 数字1
      176 183 190 197 204 211 218 225 232 239 246 253
      
      # 数字9
      183 184 185 186 190 191 192 193 195 202 209 216 219 220 221 222 226 227 228 229 231 238 245 252 255 256 257 258
    )
    
    light_green_commits=5     # 背景区域提交次数（浅色）
    full_green_commits=1      # 数字区域提交次数（深色）
    total_days=364
    
    for (( day = 0; day < total_days; day++ )); do
      commit_date=$(date -d "$start_date + $day days" +'%Y-%m-%d %H:%M:%S')
      
      if printf '%s\n' "${offsets_2019[@]}" | grep -qx "$day"; then
        for (( i = 0; i < full_green_commits; i++ )); do
          GIT_COMMITTER_DATE="$commit_date" git commit --allow-empty -m "Dark green at $commit_date" --date "$commit_date"
        done
      else
        for (( i = 0; i < light_green_commits; i++ )); do
          GIT_COMMITTER_DATE="$commit_date" git commit --allow-empty -m "Light green at $commit_date" --date "$commit_date"
        done
      fi
    done
    
    git push
